String.prototype.strFormat=function(){if(arguments.length==0){return this}for(var s=this,i=0;i<arguments.length;i++){s=s.replace(new RegExp("\\{"+i+"\\}","g"),arguments[i])}return s};function initMap(){var Map=function Map(){this.container={}};Map.prototype.put=function(key,value){try{if(key!=null&&key!=""){this.container[key]=value}}catch(e){return e}};Map.prototype.set=function(key,value){try{if(key!=null&&key!=""){this.container[key]=value}}catch(e){return e}};Map.prototype.has=function(key){try{return this.container[key]!==null}catch(e){return e}};Map.prototype.get=function(key){try{return this.container[key]}catch(e){return e}};Map.prototype.containsKey=function(key){try{for(var p in this.container){if(this.p==key){return true}}return false}catch(e){return e}};Map.prototype.size=function(){return this.keyArray().length};Map.prototype.keyArray=function(){var keys=new Array();for(var p in this.container){keys.push(p)}return keys};Map.prototype.containsValue=function(value){try{for(var p in this.container){if(this.container[p]===value){return true}}return false}catch(e){return e}};Map.prototype.remove=function(key){try{delete this.container[key]}catch(e){return e}};Map.prototype.clear=function(){try{delete this.container;this.container={}}catch(e){return e}};return Map}var Map=Map||initMap();function getOffset(e){var target=e.target;if(target.offsetLeft==undefined){target=target.parentNode}var pageCoord=getPageCoord(target);var eventCoord={x:window.pageXOffset+e.clientX,y:window.pageYOffset+e.clientY};var offset={offsetX:eventCoord.x-pageCoord.x,offsetY:eventCoord.y-pageCoord.y};return offset}function getPageCoord(element){var coord={x:0,y:0};while(element){coord.x+=element.offsetLeft;coord.y+=element.offsetTop;element=element.offsetParent}return coord}function viewAnimate(){$(".view").hover(function(e){var _this=$(this),_desc=_this.find(".view-shadow").stop(true),width=_this.width(),height=_this.height(),left=(e.offsetX==undefined)?getOffset(e).offsetX:e.offsetX,top=(e.offsetY==undefined)?getOffset(e).offsetY:e.offsetY,right=width-left,bottom=height-top,rect={},_min=Math.min(left,top,right,bottom),_out=e.type=="mouseleave",spos={};rect[left]=function(epos){spos={left:-width,top:0};if(_out){_desc.animate(spos,"fast")}else{_desc.css(spos).animate(epos,"fast")}};rect[top]=function(epos){spos={top:-height,left:0};if(_out){_desc.animate(spos,"fast")}else{_desc.css(spos).animate(epos,"fast")}};rect[right]=function(epos){spos={left:left,top:0};if(_out){_desc.animate(spos,"fast")}else{_desc.css(spos).animate(epos,"fast")}};rect[bottom]=function(epos){spos={top:height,left:0};if(_out){_desc.animate(spos,"fast")}else{_desc.css(spos).animate(epos,"fast")}};rect[_min]({left:0,top:0})})}viewAnimate();(function(){if($(".content").hasClass("learning-center")){$("#header,#footer").css("min-Width","1180px")}})();$(".input-text[placeholder],.input-area[placeholder],.input-search[placeholder]").defaultValue();$(".table-public").find("tbody tr:even").addClass("tr-alt");var $scrollPane=$(".scroll-pane").jScrollPane();var paneApi=$scrollPane.data("jsp");$(window).bind("resize",function(){if(paneApi){if($.browser.msie){if(!throttleTimeout){throttleTimeout=setTimeout(function(){paneApi.reinitialise();throttleTimeout=null},50)}}else{paneApi.reinitialise()}}});$(".user-select,.lang-select").click(function(event){$(this).find(".dk-select-options").slideToggle(100);$(this).toggleClass("current");$(".school-list-wrapper").slideUp(100);event.stopPropagation()});$(".user-select").find(".dk-option").click(function(event){$(this).siblings().removeClass("dk-option-selected");$(this).addClass("dk-option-selected");_optionsHide();$(this).parents(".my-select").removeClass("current");event.stopPropagation()});$(document).click(function(target){var _length=$(target).parents(".my-select").length;if(_length<=0){_optionsHide()}});function _optionsHide(){$(".my-select .dk-select-options").slideUp(100);$(".my-select").removeClass("current")}$(".lang-select").find(".dk-option").click(function(event){$(this).siblings().removeClass("dk-option-selected");$(this).addClass("dk-option-selected");_html=$(this).html();$(this).parents(".lang-select").find(".dk-selected").html(_html);_optionsHide();$(this).parents(".my-select").removeClass("current");event.stopPropagation()});function fixAnimate($obj,initTop,fixTop){var _left=$obj.offset().left;var _sTop=$(window).scrollTop();var _sLeft=$(window).scrollLeft();if(initTop<=_sTop&&_sLeft==0){$obj.css({position:"fixed",left:_left-_sLeft,top:fixTop})}else{$obj.css({position:"absolute",left:"auto",top:0})}}function shake(ele,cls,times,time){var i=0,t=false,o=ele.attr("class")+" ",c="",times=times||2;if(t){return}t=setInterval(function(){i++;c=i%2?o+cls:o;ele.attr("class",c);if(i==2*times){clearInterval(t);ele.removeClass(cls)}},time)}var scrollSize=1;function _getMaxScrollWidth(){var $container=$(".tabs-wrap");var wrapWidth=$container.outerWidth();var tabsWidth=0;$("ul li",$container).each(function(){tabsWidth+=$(this).outerWidth(true)});return tabsWidth-wrapWidth}function executeLearnTab(){(function(){var $tab=$(".learn-tab").find(".tabs").children("li");var liSize=$tab.size();if(_getMaxScrollWidth()>0&&liSize>5){$(".learn-tab").addClass("tab-scroll").find(".scroll-left").addClass("scroll-no")}else{$(".learn-tab").find(".btn-scroll").hide();var totalWidth=$(".learn-tab").outerWidth();var avgWidth=(totalWidth/liSize)-1;$tab.find(".tab-inner").width(avgWidth);$(".learn-tab .tab-active:first-child").find(".tab-inner").width(avgWidth+1)}})();function _setProperties($btn){var $container=$(".tabs-wrap");var $ul=$container.find("ul");var scrollWidth=$ul.find("li").outerWidth(true)*scrollSize;var startPos=$container.scrollLeft();var btnStr=$btn.attr("class").split(/\s+/)[1];if(btnStr=="scroll-right"){if((startPos+scrollWidth)>=_getMaxScrollWidth()){$btn.addClass("scroll-no")}var pos=Math.min(startPos+scrollWidth,_getMaxScrollWidth())}if(btnStr=="scroll-left"){if((startPos-scrollWidth)<0){$btn.addClass("scroll-no")}var pos=Math.max(startPos-scrollWidth,0)}$container.stop(true,true).animate({scrollLeft:pos},200)}$(".learn-tab").find(".scroll-right").click(function(){$(this).siblings(".scroll-left").removeClass("scroll-no");_setProperties($(this))});$(".learn-tab").find(".scroll-left").click(function(){$(this).siblings(".scroll-right").removeClass("scroll-no");_setProperties($(this))})}executeLearnTab();(function($){$.fn.scrollToolbar=function(options){var defaults={size:1};var opts=$.extend({},defaults,options);return this.each(function(){var $this=$(this);var $container=$this.find(".scroll-wrap");function getMaxScrollWidth(){var wrapWidth=$container.outerWidth();var tabsWidth=0;$(".scroll-item",$container).each(function(){tabsWidth+=$(this).outerWidth(true)});return tabsWidth-wrapWidth}function setProperties($btn){var scrollWidth=$container.find(".scroll-item").outerWidth(true)*opts.size;var startPos=$container.scrollLeft();var btnStr=$btn.attr("class").split(/\s+/)[1];if(btnStr=="btn-next"){if((startPos+scrollWidth)>=getMaxScrollWidth()){$btn.addClass("scroll-disabled")}var pos=Math.min(startPos+scrollWidth,getMaxScrollWidth())}if(btnStr=="btn-prev"){if((startPos-scrollWidth)<0){$btn.addClass("scroll-disabled")}var pos=Math.max(startPos-scrollWidth,0)}$container.stop(true,true).animate({scrollLeft:pos},200)}if(getMaxScrollWidth()<0){$this.find(".btn-tool").hide()}else{$this.addClass("scroll-true").find(".btn-prev").addClass("scroll-disabled");$this.find(".btn-next").click(function(){$(this).siblings(".btn-prev").removeClass("scroll-disabled");setProperties($(this))});$this.find(".btn-prev").click(function(){$(this).siblings(".btn-next").removeClass("scroll-disabled");setProperties($(this))})}})}})(jQuery);function formatAvatar(elem){if(window.PIE){$(elem).each(function(){PIE.attach(this)})}}formatAvatar(".user-max");formatAvatar(".user-min");formatAvatar(".user-header");formatAvatar(".t-img img");formatAvatar(".img-show");formatAvatar(".user-img");function circleProgressbar(b,t,n,w,s){w=w||128;s=s||10;var paper=null;this.paper=Raphael(b,w,w);var l="#16a1a4";var c="#f48282";if(n>=1){n=0.99999}if(n==0){n=1e-8}var percent=n;var pdeg=n*360;var PI=Math.PI;var r=Math.floor(w/2-s/2)-1;this.paper.circle(0,0,r).attr({stroke:l,"stroke-width":s}).translate(Math.floor(w/2)-1,Math.floor(w/2)-1);var ideg=0;var circleMark={getX:function(deg){return r*Math.sin(deg*Math.PI/180)},getY:function(deg){return -r*Math.cos(deg*Math.PI/180)}};var amax=0;if(pdeg>180){amax=1}var path=["M",circleMark.getX(ideg)," ",circleMark.getY(ideg),"A",r," ",r," ","0"," ",amax," ","1"," ",circleMark.getX(pdeg-ideg),"  ",circleMark.getY(pdeg-ideg)].join("");this.paper.path(path).attr({stroke:c,"stroke-width":s+0.4}).translate(Math.floor(w/2)-1,Math.floor(w/2)-1);$(t).text(Math.round(percent*100)+"%")}(function($){$.fn.scrollFix=function(options){var defaults={initTop:0,effect:false,outerDom:null,relative:null,className:"fix-default"};var opts=$.extend({},defaults,options);var $tempDom=$("<div class='placeholderDom'>&nbsp;</div>");return this.each(function(){var $this=$(this),compareLeft=$this.position().left;$this.removeAttr("style");var offsetTop=$this.offset().top;var offsetParentTop=$this.parent().offset().top;var _tempDom=$this.parent().find(".placeholderDom");if(_tempDom.length>0){$tempDom=_tempDom}$tempDom.css({"float":$this.css("float"),position:$this.css("position"),top:$this.css("top"),left:$this.css("left"),right:$this.css("right")});$(window).scroll(function(){_setProperty($this)});$(window).resize(function(){$this.removeAttr("style");$this.removeClass("fixed-effect").removeClass(opts.className);compareLeft=$this.position().left;offsetTop=$this.offset().top;_setProperty($this)});_setProperty($this);function _setProperty($elem){var _offsetLeft=$elem.parent().offset().left,offsetLeft=_offsetLeft+compareLeft;var height=$elem.outerHeight();var parentHeight;if(opts.outerDom){parentHeight=opts.outerDom.outerHeight()}else{parentHeight=$elem.parent().outerHeight();if($elem.parent()[0].tagName=="BODY"){parentHeight+=$(window).scrollTop()}}var scrollTop=$(window).scrollTop();var scrollLeft=$(window).scrollLeft();if(scrollTop>(offsetTop-opts.initTop)&&offsetLeft>=0&&scrollLeft<=0){var compareTop=height-(parentHeight-scrollTop+offsetParentTop);$tempDom.css("height",$elem.outerHeight());if(!$elem.next(".placeholderDom").length>0){$elem.after($tempDom)}if(opts.relative){$elem.css({width:opts.relative.outerWidth()})}if(compareTop<0){$elem.css({position:"fixed",left:offsetLeft,top:opts.initTop,zIndex:20});if(opts.effect){$elem.addClass("fixed-effect")}}else{$elem.css({position:"fixed",left:offsetLeft,top:-compareTop,zIndex:20});if(opts.effect){$elem.addClass("fixed-effect")}}if(opts.className){$elem.addClass(opts.className)}}else{$elem.css({position:"static"});$elem.removeClass("fixed-effect");$elem.removeClass(opts.className);$elem.removeAttr("style");$elem.next(".placeholderDom").remove()}}$.fn.updateScrollFix=function(){_setProperty($this)}})}})(jQuery);(function($){var pageMarkMath={formatPage:function(current,total,fb,mb,lb){var _r=[];var _t=Math.floor(mb/2);for(var i=1;i<1+fb;i++){_r.push(i)}for(var i=total;i>total-lb;i--){_r.push(i)}for(var i=current-_t;i<=current+_t;i++){if(1<=i&&i<=total){_r.push(i)}}for(var i=current-_t;i<=current+_t;i++){if(1<=i&&i<=total){_r.push(i)}}_r=pageMarkMath.unique(_r);pageMarkMath.sort(_r);_r=pageMarkMath.linkAppend(_r);return _r},unique:function(arr){arr=arr||[];var ret=[];var hash={};for(var i=0;i<arr.length;i++){var item=arr[i];var key=typeof(item)+item;if(hash[key]!==1){ret.push(item);hash[key]=1}}return ret},sort:function(arr){return arr.sort(function(a,b){return a-b})},linkAppend:function(arr){var _r=[];for(var i=0;i<arr.length;i++){_r.push(arr[i]);if(typeof arr[i+1]!="undefined"&&arr[i+1]-arr[i]==2){_r.push(arr[i]+1)}}return _r},getRID:function(){var length=0;while(length==0){var _id=Math.random();_id=(_id+"").substring(2,10);if($("#"+_id).length==0){return _id}}}};var pageMark=function(target,params){var $target=$(target);var id=$target.attr("id");var def={current:1,total:10,pSize:10,showPageSize:false,block_a:1,block_b:5,block_c:1,onClicked:null};var builder={mark:function(current,total,pSize,showPageSize,tb,bb,lb){var aPage=pageMarkMath.formatPage(current,total,tb,bb,lb);var html=[];html.push("<div>");if(methods.debug||current>0){html.push('<ul class="clearfix">');html.push('<li class="page-prev"><a href="javascript:void(0)">&lsaquo;</a></li>');for(var i=0;i<aPage.length;i++){if(current==aPage[i]){html.push('<li class="page-num current"><a href="javascript:void(0)" pageNum="'+aPage[i]+'">'+aPage[i]+"</a></li>")}else{html.push('<li class="page-num"><a href="javascript:void(0)" pageNum="'+aPage[i]+'">'+aPage[i]+"</a></li>")}if(aPage[i]<aPage[i+1]-1){html.push('<li class="page-num"><a href="javascript:void(0)" class="page-dot">...</a></li>')}}html.push('<li class="page-next"><a href="javascript:void(0)">&rsaquo;</a></li>');if(showPageSize){html.push('<li class="page-dropdown">');html.push('<select class="page-select">');html.push('<option value="10" ');if(pSize==10){html.push('selected="selected"')}html.push(">10</option>");html.push('<option value="20" ');if(pSize==20){html.push('selected="selected"')}html.push(">20</option>");html.push('<option value="50" ');if(pSize==50){html.push('selected="selected"')}html.push(">50</option>");html.push('<option value="100" ');if(pSize==100){html.push('selected="selected"')}html.push(">100</option>");html.push("</select>Êù°");html.push("</li>")}html.push('<li class="page-action">');html.push('<input type="text" class="input-text input-page" title="Enter Search" _type="changeIndex">');html.push('<span class="page-total">/'+p.total+" "+Msg.get("page")+"</span>");html.push("</li>");html.push("</ul>")}html.push("</div>");return html}};var methods={debug:false,init:function(a){methods.reload(a)},reload:function(a){p.current=parseInt(a.current||def.current);p.total=parseInt(a.total||def.total);p.pSize=parseInt(a.pageSize||def.pSize);p.showPageSize=a.showPageSize||def.showPageSize;p.block_a=parseInt(a.block_a||def.block_a);p.block_b=parseInt(a.block_b||def.block_b);var arr_html=[];if(methods.debug||p.total>1){arr_html=builder.mark(p.current,p.total,p.pSize,p.showPageSize,p.block_a,p.block_b,p.block_c)}arr_html.length-1;arr_html.shift();$target.html(arr_html.join(""));eve.pageClick($target);eve.pagePreClick($target);eve.pageNextClick($target);eve.pageInputKeyUp($target);if(p.showPageSize){eve.pageSizeSelect($target)}}};var eve={pageClick:function(target){$(".page-num",target).on("click",function(){var obj=$(this);var num=parseInt($(">a",obj).text()||1)||1;if(methods.debug||num!=p.current){if(p.showPageSize){p.onClicked&&p.onClicked(num,p.pSize,target)}else{p.onClicked&&p.onClicked(num,target)}}})},pagePreClick:function(target){$(".page-prev",target).on("click",function(){var num=p.current-1;if(num<1){num=1}if(methods.debug||num!=p.current){if(p.showPageSize){p.onClicked&&p.onClicked(num,p.pSize,target)}else{p.onClicked&&p.onClicked(num,target)}}})},pageNextClick:function(target){$(".page-next",target).on("click",function(){var num=p.current+1;if(num>p.total){num=p.total}if(methods.debug||num!=p.current){if(p.showPageSize){p.onClicked&&p.onClicked(num,p.pSize,target)}else{p.onClicked&&p.onClicked(num,target)}}})},pageInputKeyUp:function(target){$('[_type="changeIndex"]',target).on("keyup",function(event){var $this=$(this);if($.trim($this.val()||"").length>0){var num=parseInt($this.val()||"");if(isNaN(num)){num=0}if(num>p.total){num=p.total}if(num<1){num=1}if(event.keyCode==13){if(methods.debug||num!=p.current){if(p.showPageSize){p.onClicked&&p.onClicked(num,p.pSize,target)}else{p.onClicked&&p.onClicked(num,target)}}}}})},pageSizeSelect:function(target){$(".page-select",target).select({change:function(){var changeSize=this.value;p.onClicked&&p.onClicked(1,changeSize,target)}})}};var pub={reload:function(a){p=$.extend(p,a);methods.reload(p)}};var p=$.extend(def,params);methods.init(p);return pub};$.fn.pageMark=function(action,params){params=params||action;var $target=$(this);if(!$target.hasClass("pagination")){$target.addClass("pagination")}if(typeof $target=="undefined"){return null}var id=$target.attr("id");if(typeof id=="undefined"){id=pageMarkMath.getRID();$target.attr("id",id)}gM.log($target.data("pageMark"));if(typeof $target.data("pageMark")=="undefined"){$target.data("pageMark",pageMark($target,params))}var pmk=$target.data("pageMark");if(typeof action!="undefined"&&typeof action=="string"){pmk[action].call("",params)}return pmk}}(jQuery));